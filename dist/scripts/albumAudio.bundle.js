(()=>{function e(e,t,n,a,o,i,r){try{var s=e[i](r),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(a,o)}var t,n={playAnimation:null,previousAnimation:null,nextAnimation:null,arr:[playIcon=document.getElementById("play-button"),previousIcon=document.getElementById("previous-button"),nextIcon=document.getElementById("next-button")],range:document.getElementById("range-input"),audio:document.querySelector("audio"),src:["https://idorenyinudoh.github.io/undiluted-music2/10%20Sing%20About%20Me,%20I'm%20Dying%20of%20Thirs.m4a","https://idorenyinudoh.github.io/undiluted-music2/beamer-rema_ft_rvssian.mp3"]},a=function(){n.arr.forEach((function(e){document.activeElement===e&&!1===e.classList.contains("play-focus")&&e.classList.add("play-focus")}))},o=function(){n.arr.forEach((function(e){e.classList.contains("play-focus")&&e.classList.remove("play-focus")}))},i=function(){n.range.classList.contains("range-focus")&&(n.range.classList.remove("range-focus"),document.querySelector("div#range-container").classList.remove("outline"))},r={root:document.querySelector("html"),cur:document.getElementById("current-time"),dur:document.getElementById("duration"),time:function(e){var t,n=Math.floor(e/60);return"".concat(n,":").concat((t=e%60)<10?"0".concat(t):"".concat(t))},metadata:{forProgress:function(){n.audio.duration>0&&r.root.style.setProperty("--buffered-width","".concat(Math.floor(n.audio.buffered.end(n.audio.buffered.length-1))/n.range.max*100,"%"))},main:function(){n.range.max=Math.floor(n.audio.duration),r.dur.textContent=r.time(n.range.max),this.forProgress()}},inputEvent:function(){this.cur.textContent=r.time(n.range.value),this.root.style.setProperty("--before-width","".concat(n.range.value/n.range.max*100,"%"))},updateCurrentTime:function(){n.range.value=Math.floor(n.audio.currentTime),r.inputEvent(),r.controlPlayback.updatePositionState(),r.rAF=requestAnimationFrame(r.updateCurrentTime)},controlRaf:{isPlayingRaf:!1,play:function(){requestAnimationFrame(r.updateCurrentTime),this.isPlayingRaf=!0},stop:function(){cancelAnimationFrame(r.rAF),this.isPlayingRaf=!1}},controlPlayback:{isShowingPlay:!0,playBack:function(){this.isShowingPlay?(n.audio.play(),n.playAnimation.playSegments([14,28],!0),n.arr[0].setAttribute("aria-label","pause"),r.controlRaf.play(),this.isShowingPlay=!1):(n.audio.paused||n.audio.pause(),n.playAnimation.playSegments([0,14],!0),n.arr[0].setAttribute("aria-label","play"),r.controlRaf.stop(),this.isShowingPlay=!0)},prenext:function(){n.range.value=0,r.cur.textContent="0:00",r.dur.textContent="0:00",r.root.style.setProperty("--before-width","0%"),r.root.style.setProperty("--buffered-width","0%"),this.loadAudio(),this.isShowingPlay||(r.controlRaf.stop(),n.audio.play(),r.controlRaf.play())},previous:function(){for(var e=0;e<n.src.length;e++)if(n.audio.src===n.src[e]){n.audio.src=0===e?n.src[n.src.length-1]:n.src[e-1],this.prenext();break}},next:function(){for(var e=0;e<n.src.length;e++)if(n.audio.src===n.src[e]){e===n.src.length-1?n.audio.src=n.src[0]:n.audio.src=n.src[e+1],this.prenext();break}},updatePositionState:function(){"setPositionState"in navigator.mediaSession&&navigator.mediaSession.setPositionState({duration:n.audio.duration,playbackRate:n.audio.playbackRate,position:n.audio.currentTime})},loadAudio:function(){n.audio.readyState>0?r.metadata.main():n.audio.addEventListener("loadedmetadata",(function(){r.metadata.main()}))}}};(t=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bodymovin.loadAnimation;case 2:n.playAnimation=bodymovin.loadAnimation({container:n.arr[0],path:"../../lottieJson/pause.json",renderer:"svg",loop:!1,autoplay:!1}),n.previousAnimation=bodymovin.loadAnimation({container:n.arr[1],path:"../../lottieJson/previous.json",renderer:"svg",loop:!1,autoplay:!1}),n.nextAnimation=bodymovin.loadAnimation({container:n.arr[2],path:"../../lottieJson/next.json",renderer:"svg",loop:!1,autoplay:!1}),n.playAnimation.addEventListener("data_ready",(function(){n.playAnimation.goToAndStop(14,!0)}));case 6:case"end":return e.stop()}}),e)})),function(){var n=this,a=arguments;return new Promise((function(o,i){var r=t.apply(n,a);function s(t){e(r,o,i,s,c,"next",t)}function c(t){e(r,o,i,s,c,"throw",t)}s(void 0)}))})(),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:document.querySelector(".name").textContent,artist:document.querySelector(".people").textContent,album:document.querySelector(".album-title").textContent,artwork:[{src:document.querySelector(".cover img").src,sizes:"96x96"},{src:document.querySelector(".cover img").src,sizes:"128x128"},{src:document.querySelector(".cover img").src,sizes:"192x192"},{src:document.querySelector(".cover img").src,sizes:"256x256"},{src:document.querySelector(".cover img").src,sizes:"384x384"},{src:document.querySelector(".cover img").src,sizes:"512x512"}]}),navigator.mediaSession.setActionHandler("play",(function(){r.controlPlayback.playBack()})),navigator.mediaSession.setActionHandler("pause",(function(){r.controlPlayback.playBack()})),navigator.mediaSession.setActionHandler("stop",(function(){n.audio.currentTime=0,n.range.value=0,r.controlRaf.stop(),r.inputEvent(),n.audio.paused||(n.playAnimation.playSegments([0,14],!0),n.arr[0].setAttribute("aria-label","play"),r.controlPlayback.isShowingPlay=!0)})),navigator.mediaSession.setActionHandler("seekbackward",(function(e){n.audio.currentTime=n.audio.currentTime-(e.seekOffset||10)})),navigator.mediaSession.setActionHandler("seekforward",(function(e){n.audio.currentTime=n.audio.currentTime+(e.seekOffset||10)})),navigator.mediaSession.setActionHandler("seekto",(function(e){e.fastSeek&&"d"in n.audio?n.audio.fastSeek(e.seekTime):n.audio.currentTime=e.seekTime})),navigator.mediaSession.setActionHandler("previoustrack",(function(){r.controlPlayback.previous()})),navigator.mediaSession.setActionHandler("nexttrack",(function(){r.controlPlayback.next()}))),r.controlPlayback.loadAudio(),n.arr[0].addEventListener("click",(function(){r.controlPlayback.playBack()})),n.audio.addEventListener("progress",r.metadata.forProgress),n.range.addEventListener("keyup",(function(){document.activeElement===n.range&&!1===n.range.classList.contains("range-focus")&&(n.range.classList.add("range-focus"),document.querySelector("div#range-container").classList.add("outline"))})),n.range.addEventListener("blur",i),n.range.addEventListener("pointerdown",i),n.range.addEventListener("input",(function(){r.controlRaf.stop(),r.inputEvent()})),n.range.addEventListener("change",(function(){n.audio.currentTime=n.range.value,n.audio.paused||r.controlRaf.play()})),n.arr[1].addEventListener("click",(function(){r.controlPlayback.previous(),n.previousAnimation.playSegments([10,25],!0)})),n.arr[2].addEventListener("click",(function(){r.controlPlayback.next(),n.nextAnimation.playSegments([10,25],!0)})),n.arr.forEach((function(e){e.addEventListener("keyup",a),e.addEventListener("blur",o),e.addEventListener("pointerdown",o)})),n.audio.addEventListener("ended",(function(){r.controlPlayback.next()}))})();