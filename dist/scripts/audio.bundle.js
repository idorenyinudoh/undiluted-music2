(()=>{function e(e,n,a,t,o,i,r){try{var c=e[i](r),s=c.value}catch(e){return void a(e)}c.done?n(s):Promise.resolve(s).then(t,o)}var n,a={playAnimation:null,playIcon:document.getElementById("play-icon"),range:document.getElementById("range-input"),audio:document.querySelector("audio")},t=function(){a.playIcon.classList.contains("play-focus")&&a.playIcon.classList.remove("play-focus")},o=function(){a.range.classList.contains("range-focus")&&(a.range.classList.remove("range-focus"),document.querySelector("div#range-container").classList.remove("outline"))},i={root:document.querySelector("html"),time:function(e){var n,a=Math.floor(e/60);return"".concat(a,":").concat((n=e%60)<10?"0".concat(n):"".concat(n))},metadata:{forProgress:function(){a.audio.duration>0&&i.root.style.setProperty("--buffered-width","".concat(Math.floor(a.audio.buffered.end(a.audio.buffered.length-1))/a.range.max*100,"%"))},main:function(){a.range.max=Math.floor(a.audio.duration),document.querySelector("#duration").textContent=i.time(a.range.max),this.forProgress()}},inputEvent:function(){document.querySelector("#current-time").textContent=i.time(a.range.value),i.root.style.setProperty("--before-width","".concat(a.range.value/a.range.max*100,"%"))},updateCurrentTime:function(){a.range.value=Math.floor(a.audio.currentTime),i.inputEvent(),i.rAF=requestAnimationFrame(i.updateCurrentTime)},controlRaf:{isPlayingRaf:!1,play:function(){requestAnimationFrame(i.updateCurrentTime),this.isPlayingRaf=!0},stop:function(){cancelAnimationFrame(i.rAF),this.isPlayingRaf=!1}},controlPlayback:{isShowingPlay:!0,playBack:function(){this.isShowingPlay?(a.audio.play(),a.playAnimation.playSegments([14,28],!0),a.playIcon.setAttribute("aria-label","pause"),i.controlRaf.play(),this.isShowingPlay=!1):(a.audio.paused||a.audio.pause(),a.playAnimation.playSegments([0,14],!0),a.playIcon.setAttribute("aria-label","play"),i.controlRaf.stop(),this.isShowingPlay=!0)}}};(n=regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,bodymovin.loadAnimation;case 2:a.playAnimation=bodymovin.loadAnimation({container:a.playIcon,path:"lottieJson/pause.json",renderer:"svg",loop:!1,autoplay:!1}),a.playAnimation.goToAndStop(14,!0);case 4:case"end":return e.stop()}}),e)})),function(){var a=this,t=arguments;return new Promise((function(o,i){var r=n.apply(a,t);function c(n){e(r,o,i,c,s,"next",n)}function s(n){e(r,o,i,c,s,"throw",n)}c(void 0)}))})(),"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:document.querySelector("#today-title").textContent,artist:document.querySelector("#today-artiste").textContent}),navigator.mediaSession.setActionHandler("play",(function(){i.controlPlayback.playBack()})),navigator.mediaSession.setActionHandler("pause",(function(){i.controlPlayback.playBack()})),navigator.mediaSession.setActionHandler("stop",(function(){a.audio.currentTime=0,a.range.value=0,i.controlRaf.stop(),i.inputEvent(),a.audio.paused||(a.playAnimation.playSegments([0,14],!0),a.playIcon.setAttribute("aria-label","play"),i.controlPlayback.isShowingPlay=!0)})),navigator.mediaSession.setActionHandler("seekbackward",(function(e){a.audio.currentTime=a.audio.currentTime-(e.seekOffset||10)})),navigator.mediaSession.setActionHandler("seekforward",(function(e){a.audio.currentTime=a.audio.currentTime+(e.seekOffset||10)})),navigator.mediaSession.setActionHandler("seekto",(function(e){e.fastSeek&&"d"in a.audio?a.audio.fastSeek(e.seekTime):a.audio.currentTime=e.seekTime}))),a.audio.readyState>0?i.metadata.main():a.audio.addEventListener("loadedmetadata",(function(){i.metadata.main()})),a.playIcon.addEventListener("click",(function(){i.controlPlayback.playBack()})),a.audio.addEventListener("progress",i.metadata.forProgress),a.playIcon.addEventListener("keyup",(function(){document.activeElement===a.playIcon&&!1===a.playIcon.classList.contains("play-focus")&&a.playIcon.classList.add("play-focus")})),a.playIcon.addEventListener("blur",t),a.playIcon.addEventListener("pointerdown",t),a.range.addEventListener("keyup",(function(){document.activeElement===a.range&&!1===a.range.classList.contains("range-focus")&&(a.range.classList.add("range-focus"),document.querySelector("div#range-container").classList.add("outline"))})),a.range.addEventListener("blur",o),a.range.addEventListener("pointerdown",o),a.range.addEventListener("input",(function(){i.controlRaf.stop(),i.inputEvent()})),a.range.addEventListener("change",(function(){a.audio.currentTime=a.range.value,a.audio.paused||i.controlRaf.play()}))})();